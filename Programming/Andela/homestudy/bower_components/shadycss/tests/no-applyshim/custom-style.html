<!DOCTYPE html><html><head><script>WCT={waitFor:function(cb){HTMLImports.whenReady(cb)}};</script><script src="../../node_modules/wct-browser-legacy/browser.js"></script><script src="../../node_modules/@webcomponents/webcomponents-platform/webcomponents-platform.js"></script><script src="../../node_modules/es6-promise/dist/es6-promise.auto.min.js"></script><script src="../../node_modules/@webcomponents/template/template.js"></script><script src="../../node_modules/@webcomponents/html-imports/html-imports.min.js"></script><script src="../../node_modules/@webcomponents/shadydom/shadydom.min.js"></script><script src="../../node_modules/@webcomponents/custom-elements/custom-elements.min.js"></script><script src="../../custom-style-interface.min.js"></script><script src="../module/generated/make-element.js"></script><script src="../module/generated/custom-style-element.js"></script></head><body><custom-style><style>html{--foo:rgb(123, 123, 123);}</style></custom-style><template id="x-inner"><style>:host{display:block;height:100px;width:100px;border:4px solid blue;background-color:var(--foo);}</style></template><template id="x-outer"><style>:host{display:block;}</style><x-inner></x-inner></template><x-outer id="target"></x-outer><script>suite("Custom Style upgrades",function(){suiteSetup(function(){makeElement("x-inner");makeElement("x-outer")});test("custom-style applies to deeply nested elements",function(){var target=document.querySelector("#target"),inner=target.shadowRoot.querySelector("x-inner");assert.equal(getComputedStyle(inner).backgroundColor,"rgb(123, 123, 123)")})});</script></body></html>