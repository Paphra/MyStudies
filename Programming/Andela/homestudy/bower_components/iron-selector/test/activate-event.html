<!DOCTYPE html><html><head><title>iron-selector-activate-event</title><meta charset="UTF-8"><script src="../../webcomponentsjs/webcomponents-lite.js"></script><script src="../../web-component-tester/browser.js"></script><script src="../../test-fixture/test-fixture-mocha.js"></script><link rel="import" href="../../test-fixture/test-fixture.html"><link rel="import" href="../iron-selector.html"><style>.iron-selected{background:#ccc;}</style></head><body><test-fixture id="test"><template><iron-selector id="selector" selected="0"><div>Item 0</div><div>Item 1</div><div>Item 2</div><div>Item 3</div><div>Item 4</div></iron-selector></template></test-fixture><script>suite("activate event",function(){var s;setup(function(done){s=fixture("test");s.addEventListener("iron-items-changed",function onIronItemsChanged(){s.removeEventListener("iron-items-changed",onIronItemsChanged);done()})});test("activates on tap",function(){assert.equal(s.selected,"0");s.children[1].dispatchEvent(new CustomEvent("tap",{bubbles:!0}));assert.equal(s.selected,"1")});test("activates on tap and fires iron-activate",function(done){assert.equal(s.selected,"0");s.addEventListener("iron-activate",function(event){assert.equal(event.detail.selected,"1");assert.equal(event.detail.item,s.children[1]);done()});s.children[1].dispatchEvent(new CustomEvent("tap",{bubbles:!0}))});test("tap on already selected and fires iron-activate",function(done){assert.equal(s.selected,"0");s.addEventListener("iron-activate",function(event){assert.equal(event.detail.selected,"0");assert.equal(event.detail.item,s.children[0]);done()});s.children[0].dispatchEvent(new CustomEvent("tap",{bubbles:!0}))});test("activates on mousedown",function(){s.activateEvent="mousedown";s.children[2].dispatchEvent(new CustomEvent("mousedown",{bubbles:!0}));assert.equal(s.selected,"2")});test("activates on mousedown and fires iron-activate",function(done){s.addEventListener("iron-activate",function(event){assert.equal(event.detail.selected,"2");assert.equal(event.detail.item,s.children[2]);done()});s.activateEvent="mousedown";s.children[2].dispatchEvent(new CustomEvent("mousedown",{bubbles:!0}))});test("no activation",function(){assert.equal(s.selected,"0");s.activateEvent=null;s.children[2].dispatchEvent(new CustomEvent("mousedown",{bubbles:!0}));assert.equal(s.selected,"0")});test("activates on tap and preventDefault",function(){s.addEventListener("iron-activate",function(event){event.preventDefault()});s.children[2].dispatchEvent(new CustomEvent("tap",{bubbles:!0}));assert.equal(s.selected,"0")});test("activates after detach and re-attach",function(){var parent=s.parentNode;parent.removeChild(s);parent.appendChild(s);s.children[2].dispatchEvent(new CustomEvent("tap",{bubbles:!0}));assert.equal(s.selected,"2")})});</script></body></html>